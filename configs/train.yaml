scene_name: ???
group_name: dev

# --- Debugging and visualization
debug: False # if true -> disable wandb logging
visualise_cam_preds: True

# --- Input / output paths
output_dir: /scratch/izar/cizinsky/thesis/output/${scene_name}
preprocess_dir:  /scratch/izar/cizinsky/multiply-output/preprocessing/data/football_high_res
train_dir: ${output_dir}/training

# --- Training settings
iters: 30000
save_freq: 1000 # frequency of saving the canonical model
resume: false
tids: [0, 1]
cloud_downsample: 30
batch_size: 1  # number of images per batch
train_bg: false

# --- General system settings to control memory usage and speed
# Device to use for training
device: cuda
# Resolution of the input video frames (width, height)
downscale: 1 
# if true -> use packed gaussian representation (more memory efficient)
packed: False 

# --- 3DGS settings
gs_refine_every: 300      # frequency of applying the densification strategy
gs_refine_stop_iter: 7500 # stop applying the densification strategy after these many iterations
gs_refine_start_iter: 500 # default is normally 500

# --- Loss and regularization weights
# L1 loss weight
l1_lambda: 0.8
# SSIM loss weight 
ssim_lambda: 0.2
# Opacity and scale regularization weights
opacity_reg: 0.001
scale_reg: 0.001
# k-nearest neighbors for skinning weights computation
lbs_knn: 30

mask_refinement:
  enabled: true
  alpha_threshold: 0.3
  loss_weight: 0.000
  rebuild_every_epochs: 1000
  sam2:
    model_id: facebook/sam2.1-hiera-large
    device: cuda
    mask_threshold: 0.0
    multimask_output: false
    max_points: 10
    use_initial_mask: true

# --- Learning rates for the model parameters
# LR for 3D point positions
means_lr: 1.6e-4 
# LR for 3D point scale factors
scales_lr: 5e-3 
# LR for 3D point orientations (quaternions)
quats_lr: 1e-3 
# LR for 3D point opacities
opacities_lr: 5e-2 
# LR for 3D point colors (spherical harmonics coefficients)
sh_degree: 3 
sh0_lr: 2.5e-3 
shN_lr: 1.25e-4 


# --- Wandb logging settings
logger:
  project: master-thesis
  entity: ludekcizinsky
  tags: [dev]
  run_id: null # this is for resuming

# --- Hydra settings
hydra:
  run:
    dir: /scratch/izar/cizinsky/thesis/hydra/${now:%Y-%m-%d}_${now:%H-%M-%S}
  job:
    chdir: False
